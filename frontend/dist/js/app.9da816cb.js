(()=>{"use strict";var e={910:(e,n,l)=>{var t=l(751),a=l(641),r=l(33),o=l(953),s=l(335);const u={class:"chat-app"},i={key:0,class:"loading-dots"},c=["innerHTML"],v={__name:"App",setup(e){const n=(0,o.KR)(""),l=(0,o.KR)([]),v=()=>{window.confirm("確定要刪除所有聊天紀錄嗎？")&&(l.value=[])},d=(0,o.KR)(null),p=()=>{(0,a.dY)((()=>{d.value&&(d.value.scrollTop=d.value.scrollHeight)}))};(0,a.wB)(l,p,{deep:!0});const f=async()=>{if(!n.value.trim())return;l.value.push({sender:"user",text:n.value});const e=n.value;n.value="",l.value.push({sender:"ai",loading:!0});try{const n=await s.A.post("/chat",{query:e});l.value[l.value.length-1]={sender:"ai",text:n.data.response}}catch(t){l.value[l.value.length-1]={sender:"ai",text:"Error: "+t.message}}};return(e,o)=>((0,a.uX)(),(0,a.CE)("div",u,[(0,a.Lk)("div",{class:"chat-header"},[o[3]||(o[3]=(0,a.Lk)("div",{class:"logo"},[(0,a.Lk)("img",{src:"/bdmchat-logo.png",alt:"logo"}),(0,a.Lk)("span",null,"BDM.CHAT")],-1)),(0,a.Lk)("div",{class:"header-icons"},[(0,a.Lk)("span",{class:"icon",onClick:v,title:"清除聊天紀錄"},"🗑️"),o[1]||(o[1]=(0,a.Lk)("span",{class:"icon"},"✉️",-1)),o[2]||(o[2]=(0,a.Lk)("span",{class:"icon"},"👤",-1))])]),(0,a.Lk)("div",{class:"chat-body",ref_key:"chatBody",ref:d},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.value,((e,n)=>((0,a.uX)(),(0,a.CE)("div",{key:n,class:(0,r.C4)(["msg-row",e.sender])},[(0,a.Lk)("div",{class:(0,r.C4)(["msg-bubble",e.sender])},[e.loading?((0,a.uX)(),(0,a.CE)("div",i,o[4]||(o[4]=[(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1)]))):((0,a.uX)(),(0,a.CE)("div",{key:1,innerHTML:e.text},null,8,c))],2)],2)))),128))],512),(0,a.Lk)("form",{class:"chat-footer",onSubmit:(0,t.D$)(f,["prevent"])},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>n.value=e),placeholder:"請輸入訊息....",autocomplete:"off"},null,512),[[t.Jo,n.value]]),o[5]||(o[5]=(0,a.Lk)("button",{type:"submit"},"送出",-1))],32)]))}},d=v,p=d;(0,t.Ef)(p).mount("#app")}},n={};function l(t){var a=n[t];if(void 0!==a)return a.exports;var r=n[t]={exports:{}};return e[t](r,r.exports,l),r.exports}l.m=e,(()=>{var e=[];l.O=(n,t,a,r)=>{if(!t){var o=1/0;for(c=0;c<e.length;c++){for(var[t,a,r]=e[c],s=!0,u=0;u<t.length;u++)(!1&r||o>=r)&&Object.keys(l.O).every((e=>l.O[e](t[u])))?t.splice(u--,1):(s=!1,r<o&&(o=r));if(s){e.splice(c--,1);var i=a();void 0!==i&&(n=i)}}return n}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[t,a,r]}})(),(()=>{l.d=(e,n)=>{for(var t in n)l.o(n,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}})(),(()=>{l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{l.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n)})(),(()=>{l.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={524:0};l.O.j=n=>0===e[n];var n=(n,t)=>{var a,r,[o,s,u]=t,i=0;if(o.some((n=>0!==e[n]))){for(a in s)l.o(s,a)&&(l.m[a]=s[a]);if(u)var c=u(l)}for(n&&n(t);i<o.length;i++)r=o[i],l.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return l.O(c)},t=self["webpackChunkvue_frontend"]=self["webpackChunkvue_frontend"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var t=l.O(void 0,[504],(()=>l(910)));t=l.O(t)})();
//# sourceMappingURL=app.9da816cb.js.map